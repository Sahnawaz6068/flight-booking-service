generator client {
  provider   = "prisma-client-js"
  output     = "../generated/prisma"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Airplane {
  id          Int      @id @default(autoincrement())
  modelNumber String
  capacity    Int      @default(200)
  createdAt   DateTime @default(now())
  updatedAt   DateTime
  Flight      Flight[]
  Seat        Seat[]
}

model Airport {
  id      Int      @id @default(autoincrement())
  name    String   @unique
  code    String   @unique
  address String?
  cityId  Int
  City    City     @relation(fields: [cityId], references: [id], onDelete: Cascade)
  Flight  Flight[]

  @@index([cityId])
}

model City {
  id      Int       @id @default(autoincrement())
  name    String    @unique
  Airport Airport[]
}

model Flight {
  id                 Int      @id @default(autoincrement())
  flightNumber       String
  airplaneId         Int
  departureAirportId String
  arrivalAirportId   String
  arrivalTime        DateTime
  departureTime      DateTime
  price              Int
  boardingGate       String?
  totalSeats         Int
  createdAt          DateTime @default(now())
  updatedAt          DateTime
  Airplane           Airplane @relation(fields: [airplaneId], references: [id])
  Airport            Airport  @relation(fields: [departureAirportId], references: [code])

  @@index([airplaneId])
  @@index([arrivalAirportId])
  @@index([departureAirportId])
}

model Seat {
  id         Int      @id @default(autoincrement())
  airplaneId Int
  row        Int
  col        String
  type       SeatType @default(economy)
  createdAt  DateTime @default(now())
  updatedAt  DateTime
  Airplane   Airplane @relation(fields: [airplaneId], references: [id])

  @@index([airplaneId])
}

model User {
  id          Int     @id @default(autoincrement())
  userName    String
  email       String  @unique
  password    String
  phoneNumber String?
}

enum SeatType {
  business
  economy
  premium_economy
  first_class
}
